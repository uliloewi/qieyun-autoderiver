{"version":3,"sources":["large-tooltip.ts","Entry.tsx","SchemaEditor.tsx","Main.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["LargeTooltip","init","divOuter","document","createElement","classList","add","divInner","appendChild","body","addTooltip","content","relativeToNode","showTooltip","relativeToNodeBox","getBoundingClientRect","relativeToNodeTop","top","window","pageYOffset","relativeToNodeLeft","left","pageXOffset","ReactDOM","render","divInnerBox","divInnerHeight","height","divInnerWidth","width","targetTop","targetLeft","oneEmSize","parseFloat","getComputedStyle","fontSize","maximumRight","Math","max","scrollWidth","documentElement","offsetWidth","clientWidth","style","remove","hideTooltip","addEventListener","Entry","props","entries","length","state","rubyClass","pronunciation","this","setState","replace","ch","tooltip","className","map","i","ress","onClick","handleClick","lang","join","res","index","字頭","解釋","音韻地位","反切","Fragment","描述","ref","element","joinWithBr","React","Component","JSHINT","音韻地位example","from描述","音韻地位properties","Object","getOwnPropertyNames","concat","getPrototypeOf","slice","deriverParameters","SchemaEditor","parameters","setParameters","input","setSchemaState","loadSchema","cm","options","autocomplete","list","cursor","getCursor","token","getTokenAt","from","Pos","line","start","to","end","filter","prop","startsWith","string","keys","test","event","preventDefault","fetchFile","name","original","Swal","fire","showClass","popup","hideClass","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","then","result","isConfirmed","newProp","target","value","deleteSchema","oldParameters","fromEntries","Function","forEach","key","Array","isArray","includes","err","changeParameter","onChange","JSON","parse","stringify","option","type","checked","step","parameter","push","resetParameters","disabled","single","onSubmit","schemas","label","changeSchema","id","mode","lineNumbers","scrollbarStyle","extraKeys","F11","setOption","getOption","Esc","F9","getScrollInfo","lineAtHeight","offset","heightAtLine","prettier","formatWithCursor","getValue","cursorOffset","indexFromPos","parser","plugins","parserBabel","formatted","setValue","position","posFromIndex","scrollTo","setCursor","maxHighlightLength","Infinity","viewportMargin","placeholder","styleActiveLine","autoCloseBrackets","matchBrackets","foldGutter","lint","esversion","gutters","hintOptions","hint","bind","completeSingle","onBeforeChange","data","onCursorActivity","hasFocus","showHint","onFocus","setTimeout","SwalReact","withReactContent","notifyError","msg","stack","customClass","html","copyFailed","copySuccess","copyFallback","txt","textArea","focus","select","execCommand","removeChild","presetArticle","baxter","kyonh","zyepheng","panwuyun","unt_j","msoeg_v8","chiangxhua","fanwan","putonghua","gwongzau","zaonhe","langjin","ayaka_v8","convertArticle","convertPresetArticle","exportAllSmallRhymes","exportAllSyllables","exportAllSyllablesWithCount","callback","fetch","response","catch","schemaCopy","Date","array","item","Main","largeTooltip","outputArea","schemaNames","localStorage","getItem","schemaInputs","schemaParameters","article","convertVariant","output","isApplied","userInputs","pass","callDeriver","handles","所有異體字","Yitizi","get","query字頭","擬音","entry","find","every","split","passage","chs","j","class音韻地位","iter音韻地位","代表字","Set","reduce","counter","set","Map","sort","a","b","k","v","handlePredefinedOptions","textContent","navigator","clipboard","writeText","scrollIntoView","behavior","block","changeValue","setItem","storeSchemas","schema","addSchema","splice","findIndex","rows","autoComplete","autoCorrect","autoCapitalize","spellCheck","required","handleCopy","scrollToOutput","showAbout","container","htmlContainer","showCloseButton","showConfirmButton","href","App","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3fc7e3be.chunk.js","sourcesContent":["import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./large-tooltip.css\";\r\n\r\n// https://stackoverflow.com/a/1038781\r\nfunction getPageWidth() {\r\n  return Math.max(\r\n    document.body.scrollWidth,\r\n    document.documentElement.scrollWidth,\r\n    document.body.offsetWidth,\r\n    document.documentElement.offsetWidth,\r\n    document.documentElement.clientWidth\r\n  );\r\n}\r\n\r\nfunction init() {\r\n  const divOuter = document.createElement(\"div\");\r\n  divOuter.classList.add(\"large-tooltip-outer\");\r\n  const divInner = document.createElement(\"div\");\r\n  divInner.classList.add(\"large-tooltip-inner\");\r\n  divOuter.appendChild(divInner);\r\n  divInner.classList.add(\"large-tooltip-hidden\");\r\n  document.body.appendChild(divOuter);\r\n\r\n  return {\r\n    addTooltip: (content: React.ReactElement, relativeToNode: Element) => {\r\n      function showTooltip() {\r\n        const relativeToNodeBox = relativeToNode.getBoundingClientRect();\r\n        const relativeToNodeTop = relativeToNodeBox.top + window.pageYOffset;\r\n        const relativeToNodeLeft = relativeToNodeBox.left + window.pageXOffset;\r\n\r\n        ReactDOM.render(content, divInner);\r\n\r\n        const divInnerBox = divInner.getBoundingClientRect();\r\n        const divInnerHeight = divInnerBox.height;\r\n        const divInnerWidth = divInnerBox.width;\r\n\r\n        const targetTop = relativeToNodeTop - divInnerHeight;\r\n\r\n        let targetLeft = relativeToNodeLeft - divInnerWidth / 2; // align center by default\r\n        const oneEmSize = parseFloat(getComputedStyle(document.body).fontSize);\r\n        // the distance to left margin of the page should be 1em or greater\r\n        const miniumLeft = oneEmSize;\r\n        // if left overflow, align left\r\n        targetLeft = targetLeft < miniumLeft ? miniumLeft : targetLeft;\r\n        // the distance to right margin of the page should be 1em or greater\r\n        const maximumRight = getPageWidth() - oneEmSize - divInnerWidth;\r\n        // if right overflow, align right\r\n        targetLeft = targetLeft > maximumRight ? maximumRight : targetLeft;\r\n\r\n        divInner.style.top = targetTop + \"px\";\r\n        divInner.style.left = targetLeft + \"px\";\r\n\r\n        divInner.classList.remove(\"large-tooltip-hidden\");\r\n      }\r\n      function hideTooltip() {\r\n        divInner.classList.add(\"large-tooltip-hidden\");\r\n      }\r\n      relativeToNode.addEventListener(\"mouseenter\", showTooltip, false);\r\n      relativeToNode.addEventListener(\"touchstart\", showTooltip, false);\r\n      relativeToNode.addEventListener(\"mouseleave\", hideTooltip, false);\r\n      relativeToNode.addEventListener(\"touchend\", hideTooltip, false);\r\n    },\r\n  };\r\n}\r\n\r\nconst LargeTooltip = { init };\r\n\r\nexport default LargeTooltip;\r\n","import React from \"react\";\r\nimport { Entries, joinWithBr } from \"./Main\";\r\n\r\ninterface EntryProps {\r\n  ch: string;\r\n  entries: Entries;\r\n  tooltip: any;\r\n}\r\n\r\ninterface EntryState {\r\n  rubyClass: string;\r\n  pronunciation: string[];\r\n}\r\n\r\nclass Entry extends React.Component<EntryProps, EntryState> {\r\n  constructor(props: any) {\r\n    super(props);\r\n    if (this.props.entries.length) {\r\n      this.state = {\r\n        rubyClass: this.props.entries.length > 1 ? \"entry-multiple entry-unresolved\" : \"\",\r\n        pronunciation: this.props.entries[0][0],\r\n      };\r\n    }\r\n  }\r\n\r\n  handleClick(pronunciation: string[]) {\r\n    this.setState((state: any) => ({\r\n      pronunciation,\r\n      rubyClass: state.rubyClass.replace(\" entry-unresolved\", \"\"),\r\n    }));\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.entries.length) return <>{this.props.ch}</>;\r\n\r\n    const tooltip = (\r\n      <div className=\"tooltip-items-wrapper\">\r\n        {this.props.entries.map(([pronunciation, ress], i) => (\r\n          <p\r\n            key={i}\r\n            className={\r\n              \"tooltip-item\" +\r\n              (this.props.entries.length > 1 && pronunciation === this.state.pronunciation ? \" selected\" : \"\")\r\n            }\r\n            onClick={() => this.handleClick(pronunciation)}>\r\n            <span className=\"nowrap\" lang=\"och-Latn-fonipa\">\r\n              {pronunciation.join(\" / \")}\r\n            </span>{\" \"}\r\n            {ress.map((res, index) => {\r\n              const { 字頭, 解釋, 音韻地位 } = res;\r\n              let 反切 = 音韻地位.反切(字頭);\r\n              反切 = 反切 == null ? \"\" : `${反切}切 `;\r\n              return (\r\n                <React.Fragment key={index}>\r\n                  {index !== 0 && <br />}\r\n                  <span className=\"tooltip-ch\">{字頭}</span> {音韻地位.描述} {反切 + 解釋}\r\n                </React.Fragment>\r\n              );\r\n            })}\r\n          </p>\r\n        ))}\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <span className=\"ruby-wrapper\" ref={element => element && this.props.tooltip.addTooltip(tooltip, element)}>\r\n        <ruby className={this.state.rubyClass}>\r\n          {this.props.ch}\r\n          <rp>(</rp>\r\n          <rt lang=\"och-Latn-fonipa\">{joinWithBr(this.state.pronunciation)}</rt>\r\n          <rp>)</rp>\r\n        </ruby>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Entry;\r\n","import React from \"react\";\r\nimport { Controlled as CodeMirror } from \"react-codemirror2\";\r\nimport { JSHINT } from \"jshint\";\r\nimport \"codemirror/lib/codemirror.css\";\r\nimport \"codemirror/addon/display/placeholder\";\r\nimport \"codemirror/addon/display/fullscreen\";\r\nimport \"codemirror/addon/display/fullscreen.css\";\r\nimport \"codemirror/addon/edit/matchbrackets\";\r\nimport \"codemirror/addon/edit/closebrackets\";\r\nimport \"codemirror/addon/fold/foldgutter\";\r\nimport \"codemirror/addon/fold/foldgutter.css\";\r\nimport \"codemirror/addon/fold/brace-fold\";\r\nimport \"codemirror/addon/fold/comment-fold\";\r\nimport \"codemirror/addon/hint/show-hint\";\r\nimport \"codemirror/addon/hint/show-hint.css\";\r\nimport \"codemirror/addon/lint/lint\";\r\nimport \"codemirror/addon/lint/javascript-lint\";\r\nimport \"codemirror/addon/lint/lint.css\";\r\nimport \"codemirror/addon/scroll/simplescrollbars\";\r\nimport \"codemirror/addon/scroll/simplescrollbars.css\";\r\nimport \"codemirror/addon/selection/active-line\";\r\nimport \"codemirror/mode/javascript/javascript\";\r\n\r\nimport { 音韻地位 } from \"qieyun\";\r\nimport { Pos, ShowHintOptions } from \"codemirror\";\r\nimport Swal from \"sweetalert2\";\r\nimport { fetchFile, schemas, SchemaState, Parameter } from \"./Main\";\r\nimport prettier from \"prettier/standalone\";\r\nimport parserBabel from \"prettier/parser-babel\";\r\n\r\n(window as any).JSHINT = JSHINT;\r\n\r\ninterface SchemaProps extends SchemaState {\r\n  setSchemaState: (state: SchemaState) => void;\r\n  deleteSchema: (state: SchemaState) => void;\r\n  single: boolean;\r\n  autocomplete: boolean;\r\n}\r\n\r\nconst 音韻地位example = 音韻地位.from描述(\"幫三凡入\");\r\nconst 音韻地位properties = Object.getOwnPropertyNames(音韻地位example).concat(\r\n  Object.getOwnPropertyNames(Object.getPrototypeOf(音韻地位example)).slice(1)\r\n);\r\nconst deriverParameters = [\"音韻地位\", \"字頭\"];\r\n\r\nclass SchemaEditor extends React.Component<SchemaProps, any> {\r\n  constructor(props: SchemaProps) {\r\n    super(props);\r\n    const parameters = this.setParameters(props.input);\r\n    if (parameters) props.setSchemaState({ ...props, parameters });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadSchema();\r\n  }\r\n\r\n  autocomplete(cm: CodeMirror.Editor, options: ShowHintOptions) {\r\n    if (!this?.props.autocomplete) return;\r\n\r\n    const cursor = cm.getCursor();\r\n    const token = cm.getTokenAt(cursor);\r\n    let list: string[];\r\n    let from = Pos(cursor.line, token.start);\r\n    let to = Pos(cursor.line, token.end);\r\n    const filter = () => (list = list.filter(prop => prop.startsWith(token.string) && prop !== token.string));\r\n\r\n    switch (cm.getTokenAt(Pos(cursor.line, token.start - 1)).string) {\r\n      case \"音韻地位\":\r\n        list = 音韻地位properties;\r\n        break;\r\n      case \"選項\":\r\n        list = Object.keys(this.props.parameters);\r\n        break;\r\n      default:\r\n        list = deriverParameters.concat(Object.keys(this.props.parameters).length ? [\"選項\"] : []);\r\n        if (cursor.ch === token.end && /[\\s!-#%-/:-@[-^`{-~]$/.test(token.string)) from = to;\r\n        else filter();\r\n        return { list, from, to };\r\n    }\r\n    if (token.string === \".\") from = to;\r\n    else if (cm.getTokenAt(from).string === \".\") filter();\r\n    else return;\r\n    return { list, from, to };\r\n  }\r\n\r\n  loadSchema(event?: any) {\r\n    if (event) event.preventDefault();\r\n    fetchFile(`https://cdn.jsdelivr.net/gh/nk2028/qieyun-examples@33bce60/${this.props.name}.js`, input => {\r\n      if (event && this.props.input && this.props.input !== this.props.original) {\r\n        Swal.fire({\r\n          showClass: { popup: \"\" },\r\n          hideClass: { popup: \"\" },\r\n          title: \"是否確定載入？\",\r\n          text: \"您會遺失所有變更。\",\r\n          icon: \"warning\",\r\n          showCancelButton: true,\r\n          confirmButtonText: \"確定\",\r\n          cancelButtonText: \"取消\",\r\n        }).then(result => {\r\n          if (result.isConfirmed) {\r\n            this.props.setSchemaState({\r\n              ...this.props,\r\n              input,\r\n              original: input,\r\n              parameters: this.setParameters(input) || {},\r\n            });\r\n          }\r\n        });\r\n      } else {\r\n        const newProp = { ...this.props, original: input };\r\n        if (event || !this.props.input) {\r\n          newProp.input = input;\r\n          newProp.parameters = this.setParameters(input) || {};\r\n        }\r\n        this.props.setSchemaState(newProp);\r\n      }\r\n    });\r\n  }\r\n\r\n  changeSchema(event: any) {\r\n    this.props.setSchemaState({ ...this.props, name: event.target.value });\r\n  }\r\n\r\n  deleteSchema() {\r\n    if (this.props.input && this.props.input !== this.props.original) {\r\n      Swal.fire({\r\n        showClass: { popup: \"\" },\r\n        hideClass: { popup: \"\" },\r\n        title: \"是否確定刪除？\",\r\n        text: \"您會遺失所有變更。\",\r\n        icon: \"warning\",\r\n        showCancelButton: true,\r\n        confirmButtonText: \"確定\",\r\n        cancelButtonText: \"取消\",\r\n      }).then(result => {\r\n        if (result.isConfirmed) {\r\n          this.props.deleteSchema(this.props);\r\n        }\r\n      });\r\n    } else {\r\n      this.props.deleteSchema(this.props);\r\n    }\r\n  }\r\n\r\n  setParameters(input: string, oldParameters: Parameter = this.props.parameters): any {\r\n    try {\r\n      // eslint-disable-next-line no-new-func\r\n      const parameters = Object.fromEntries(new Function(\"音韻地位\", \"字頭\", \"選項\", input)(null, null, null));\r\n      Object.keys(parameters).forEach(key => {\r\n        if (Array.isArray(parameters[key])) {\r\n          if (\r\n            key in oldParameters &&\r\n            Array.isArray(oldParameters[key]) &&\r\n            parameters[key].slice(1).includes(oldParameters[key][0])\r\n          )\r\n            parameters[key][0] = oldParameters[key][0];\r\n          else if (\r\n            typeof parameters[key][0] === \"number\" &&\r\n            parameters[key][0] >= 1 &&\r\n            parameters[key][0] < parameters[key].length\r\n          )\r\n            parameters[key][0] = parameters[key][parameters[key][0]];\r\n          else if (!parameters[key].slice(1).includes(parameters[key][0])) parameters[key][0] = parameters[key][1];\r\n        } else if (key in oldParameters && typeof oldParameters[key] === typeof parameters[key])\r\n          parameters[key] = oldParameters[key];\r\n      });\r\n      return parameters;\r\n    } catch (err) {}\r\n  }\r\n\r\n  resetParameters() {\r\n    this.props.setSchemaState({ ...this.props, parameters: this.setParameters(this.props.input, {}) || {} });\r\n  }\r\n\r\n  render() {\r\n    const changeParameter = (key: string, value: any) => {\r\n      if (Array.isArray(this.props.parameters[key])) this.props.parameters[key][0] = value;\r\n      else this.props.parameters[key] = value;\r\n      this.props.setSchemaState({ ...this.props });\r\n    };\r\n\r\n    const formatCode = (cm: CodeMirror.Editor) => {\r\n      const cursor = cm.getCursor();\r\n      const { left, top } = cm.getScrollInfo();\r\n      const line = cm.lineAtHeight(top, \"local\");\r\n      const offset = top - cm.heightAtLine(line, \"local\");\r\n      const { formatted, cursorOffset } = prettier.formatWithCursor(cm.getValue(), {\r\n        cursorOffset: cm.indexFromPos(cursor),\r\n        parser: \"babel\",\r\n        plugins: [parserBabel],\r\n      });\r\n      cm.setValue(formatted);\r\n      const position = cm.posFromIndex(cursorOffset);\r\n      cm.scrollTo(left, cm.heightAtLine(position.line - cursor.line + line, \"local\") + offset);\r\n      cm.setCursor(position);\r\n    };\r\n\r\n    let parameters = Object.entries(this.props.parameters)\r\n      .map(([key, value], index) => {\r\n        if (Array.isArray(value))\r\n          return (\r\n            <label key={index}>\r\n              {key}\r\n              <select\r\n                onChange={event => changeParameter(key, JSON.parse(event.target.value))}\r\n                value={JSON.stringify(value[0])}>\r\n                {value.slice(1).map((option, i) => (\r\n                  <option key={i + 1} value={JSON.stringify(option)}>\r\n                    {option + \"\"}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </label>\r\n          );\r\n        else\r\n          switch (typeof value) {\r\n            case \"boolean\":\r\n              return (\r\n                <label key={index}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={value}\r\n                    onChange={event => changeParameter(key, event.target.checked)}\r\n                  />\r\n                  {key}\r\n                </label>\r\n              );\r\n            case \"number\":\r\n              return (\r\n                <label key={index}>\r\n                  {key}\r\n                  <input\r\n                    type=\"number\"\r\n                    value={value}\r\n                    step=\"any\"\r\n                    onChange={event => changeParameter(key, +event.target.value)}\r\n                  />\r\n                </label>\r\n              );\r\n            case \"string\":\r\n              return (\r\n                <label key={index}>\r\n                  {key}\r\n                  <input type=\"text\" value={value} onChange={event => changeParameter(key, event.target.value)} />\r\n                </label>\r\n              );\r\n            default:\r\n              return null;\r\n          }\r\n      })\r\n      .filter(parameter => parameter);\r\n    parameters.push(\r\n      parameters.length ? (\r\n        <input\r\n          className=\"pure-button\"\r\n          type=\"button\"\r\n          value=\"恢復預設值\"\r\n          onClick={() => this.resetParameters()}\r\n          key=\"reset\"\r\n        />\r\n      ) : (\r\n        <span key=\"hint\" className=\"hint\">\r\n          此推導方案無可用選項，請於推導程式中回傳 Object.entries() 形式的陣列以使用「選項」功能。\r\n        </span>\r\n      )\r\n    );\r\n\r\n    return (\r\n      <div className=\"schema-editor\">\r\n        <form className=\"delete-schema\">\r\n          <input type=\"button\" title=\"刪除方案\" disabled={this.props.single} onClick={() => this.deleteSchema()} />\r\n        </form>\r\n        <form className=\"pure-form\" onSubmit={event => this.loadSchema(event)}>\r\n          <p>\r\n            <b>預設推導方案：</b>\r\n            {Object.entries(schemas).map(([value, label], index) => (\r\n              <label key={index}>\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"schema\"\r\n                  value={value}\r\n                  checked={this.props.name === value}\r\n                  onChange={event => this.changeSchema(event)}\r\n                />\r\n                {label}\r\n              </label>\r\n            ))}\r\n            <input className=\"pure-button\" type=\"submit\" value=\"載入\" />\r\n          </p>\r\n        </form>\r\n        <div lang=\"en-x-code\" id=\"schemaInput\">\r\n          <CodeMirror\r\n            value={this.props.input}\r\n            options={{\r\n              mode: \"javascript\",\r\n              lineNumbers: true,\r\n              scrollbarStyle: \"overlay\",\r\n              extraKeys: {\r\n                F11: cm => cm.setOption(\"fullScreen\", !cm.getOption(\"fullScreen\")),\r\n                Esc: cm => cm.setOption(\"fullScreen\", false),\r\n                F9: formatCode,\r\n              },\r\n              maxHighlightLength: Infinity,\r\n              viewportMargin: 16,\r\n              placeholder: \"以 JavaScript 輸入推導方案……\",\r\n              styleActiveLine: true,\r\n              autoCloseBrackets: true,\r\n              matchBrackets: true,\r\n              foldGutter: true,\r\n              lint: { esversion: Infinity } as any,\r\n              gutters: [\"CodeMirror-linenumbers\", \"CodeMirror-foldgutter\", \"CodeMirror-lint-markers\"],\r\n              hintOptions: { hint: this.autocomplete.bind(this), completeSingle: false },\r\n            }}\r\n            onBeforeChange={(cm, data, input) => {\r\n              const newProp = { ...this.props, input };\r\n              const parameters = this.setParameters(input);\r\n              if (parameters) newProp.parameters = parameters;\r\n              this.props.setSchemaState(newProp);\r\n            }}\r\n            onCursorActivity={cm => cm.hasFocus() && cm.showHint()}\r\n            onFocus={cm => setTimeout(() => cm.showHint(), 100)}\r\n          />\r\n        </div>\r\n        <form className=\"pure-form\">\r\n          <p>\r\n            <b>選項：</b>\r\n            {parameters}\r\n          </p>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SchemaEditor;\r\n","import React from \"react\";\r\nimport { query字頭, 音韻地位 as class音韻地位, iter音韻地位 } from \"qieyun\";\r\nimport Yitizi from \"yitizi\";\r\nimport LargeTooltip from \"./large-tooltip\";\r\nimport Entry from \"./Entry\";\r\nimport SchemaEditor from \"./SchemaEditor\";\r\nimport Swal from \"sweetalert2\";\r\nimport withReactContent from \"sweetalert2-react-content\";\r\n\r\nconst SwalReact = withReactContent(Swal);\r\n\r\nfunction notifyError(msg: string, err?: Error) {\r\n  if (err?.stack)\r\n    SwalReact.fire({\r\n      showClass: { popup: \"\" },\r\n      hideClass: { popup: \"\" },\r\n      icon: \"error\",\r\n      title: \"錯誤\",\r\n      customClass: \"error-with-stack\" as any,\r\n      html: (\r\n        <>\r\n          <p>{msg}</p>\r\n          <pre lang=\"en-x-code\">{err.stack.replace(/\\n +at eval[^]+/, \"\")}</pre>\r\n        </>\r\n      ),\r\n      confirmButtonText: \"確定\",\r\n    });\r\n  else\r\n    Swal.fire({\r\n      showClass: { popup: \"\" },\r\n      hideClass: { popup: \"\" },\r\n      icon: \"error\",\r\n      title: \"錯誤\",\r\n      text: msg,\r\n      confirmButtonText: \"確定\",\r\n    });\r\n}\r\n\r\nfunction copyFailed() {\r\n  notifyError(\"瀏覽器不支援匯出至剪貼簿，操作失敗\");\r\n}\r\n\r\nfunction copySuccess() {\r\n  Swal.fire({\r\n    showClass: { popup: \"\" },\r\n    hideClass: { popup: \"\" },\r\n    icon: \"success\",\r\n    title: \"成功\",\r\n    text: \"已成功匯出至剪貼簿\",\r\n    confirmButtonText: \"確定\",\r\n  });\r\n}\r\n\r\nfunction copyFallback(txt: string) {\r\n  const textArea = document.createElement(\"textarea\");\r\n  textArea.value = txt;\r\n  textArea.style.position = \"fixed\";\r\n  document.body.appendChild(textArea);\r\n  textArea.focus();\r\n  textArea.select();\r\n  try {\r\n    document.execCommand(\"copy\") ? copySuccess() : copyFailed();\r\n  } catch (err) {\r\n    copyFailed();\r\n  }\r\n  document.body.removeChild(textArea);\r\n}\r\n\r\nexport const schemas = {\r\n  baxter: \"白一平轉寫\",\r\n  kyonh: \"古韻羅馬字\",\r\n  zyepheng: \"隋拼\",\r\n  panwuyun: \"潘悟雲擬音\",\r\n  unt_j: \"unt 切韻擬音 J\",\r\n  msoeg_v8: \"msoeg 中古拟音 V8\",\r\n  chiangxhua: \"推導《聲音唱和圖》擬音\",\r\n  fanwan: \"推導《分韻撮要》擬音\",\r\n  putonghua: \"推導普通話\",\r\n  gwongzau: \"推導廣州音\",\r\n  zaonhe: \"推導上海話\",\r\n  langjin: \"推導南京音\",\r\n  ayaka_v8: \"綾香思考音系\",\r\n};\r\n\r\nconst options = {\r\n  convertArticle: \"從輸入框中讀取文章，並注音\",\r\n  convertPresetArticle: \"為預設文章注音\",\r\n  exportAllSmallRhymes: \"導出所有小韻\",\r\n  exportAllSyllables: \"導出所有音節\",\r\n  exportAllSyllablesWithCount: \"導出所有音節，並計數\",\r\n};\r\n\r\ntype Schema = keyof typeof schemas;\r\ntype Option = keyof typeof options;\r\n\r\ninterface MainState {\r\n  schemas: SchemaState[];\r\n  article: string;\r\n  option: Option;\r\n  convertVariant: boolean;\r\n  autocomplete: boolean;\r\n  output: JSX.Element[];\r\n  isApplied: boolean;\r\n}\r\n\r\nexport interface SchemaState {\r\n  name: Schema;\r\n  input: string;\r\n  original: string;\r\n  parameters: Parameter;\r\n  id: number;\r\n}\r\n\r\nexport type Entries = [string[], { 字頭: string; 解釋: string; 音韻地位: class音韻地位 }[]][];\r\n\r\nexport type Parameter = { [parameter: string]: any };\r\n\r\nexport function fetchFile(input: string, callback: (text: string) => void) {\r\n  fetch(input)\r\n    .then(response => response.text())\r\n    .then(callback)\r\n    .catch(err => notifyError(\"載入檔案失敗\", err));\r\n}\r\n\r\nfunction schemaCopy(): SchemaState {\r\n  return { name: \"baxter\", input: \"\", original: \"\", parameters: {}, id: +new Date() };\r\n}\r\n\r\nexport function joinWithBr(array: (string | JSX.Element)[]) {\r\n  return array.map((item, index) => (\r\n    <React.Fragment key={index}>\r\n      {index !== 0 && <br />}\r\n      {item}\r\n    </React.Fragment>\r\n  ));\r\n}\r\n\r\nlet presetArticle: string;\r\n\r\nclass Main extends React.Component<any, MainState> {\r\n  largeTooltip?: any;\r\n\r\n  outputArea?: HTMLElement;\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n\r\n    const schemaNames: Schema[] = JSON.parse(localStorage.getItem(\"schemas\") || \"[]\");\r\n    const schemaInputs: string[] = JSON.parse(localStorage.getItem(\"inputs\") || \"[]\");\r\n    const schemaParameters: Parameter[] = JSON.parse(localStorage.getItem(\"parameters\") || \"[]\");\r\n\r\n    this.state = {\r\n      schemas: schemaNames.length\r\n        ? schemaNames.map((name, id) => ({\r\n            name,\r\n            input: schemaInputs[id],\r\n            original: \"\",\r\n            parameters: schemaParameters[id],\r\n            id,\r\n          }))\r\n        : [schemaCopy()],\r\n      article:\r\n        localStorage.getItem(\"article\") ||\r\n        \"遙襟甫暢，逸興遄飛。爽籟發而清風生，纖歌凝而白雲遏。睢園綠竹，氣凌彭澤之樽；鄴水朱華，光照臨川之筆。\" +\r\n          \"四美具，二難并。窮睇眄於中天，極娛遊於暇日。天高地迥，覺宇宙之無窮；興盡悲來，識盈虛之有數。望長安於日下，目吳會於雲間。\" +\r\n          \"地勢極而南溟深，天柱高而北辰遠。關山難越，誰悲失路之人。萍水相逢，盡是他鄉之客。懷帝閽而不見，奉宣室以何年？\",\r\n      option: (localStorage.getItem(\"option\") as Option) || \"convertArticle\",\r\n      convertVariant: localStorage.getItem(\"convertVariant\") === \"true\",\r\n      autocomplete: localStorage.getItem(\"autocomplete\") !== \"false\",\r\n      output: [],\r\n      isApplied: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.largeTooltip = LargeTooltip.init();\r\n  }\r\n\r\n  handlePredefinedOptions() {\r\n    const id = +new Date() + \":\";\r\n\r\n    let userInputs: Function[];\r\n    const parameters = this.state.schemas.map(({ parameters }) => {\r\n      const pass = { ...parameters };\r\n      Object.keys(pass).forEach(key => {\r\n        if (Array.isArray(pass[key])) pass[key] = pass[key][0];\r\n      });\r\n      return pass;\r\n    });\r\n\r\n    let callDeriver = (音韻地位: class音韻地位, 字頭: string | null) => {\r\n      try {\r\n        return userInputs.map((input, index) => input(音韻地位, 字頭, parameters[index]));\r\n      } catch (err) {\r\n        notifyError(\r\n          字頭\r\n            ? `推導「${字頭}」字（音韻地位：${音韻地位.描述}）時發生錯誤`\r\n            : `推導「${音韻地位.描述}」音韻地位（字為 null）時發生錯誤`,\r\n          err\r\n        );\r\n        throw err;\r\n      }\r\n    };\r\n\r\n    if (this.state.option === \"convertPresetArticle\" && !presetArticle) {\r\n      fetchFile(\"https://cdn.jsdelivr.net/gh/nk2028/qieyun-text-label@310b6a8/index.txt\", article => {\r\n        presetArticle = article;\r\n        this.handlePredefinedOptions();\r\n      });\r\n      return;\r\n    }\r\n\r\n    let handles = {\r\n      convertArticle: () =>\r\n        Array.from(this.state.article).map((ch, i) => {\r\n          const 所有異體字 = [ch].concat(this.state.convertVariant ? Yitizi.get(ch) : []);\r\n          const entries: Entries = [];\r\n\r\n          for (const 字頭 of 所有異體字) {\r\n            for (const { 音韻地位, 解釋 } of query字頭(字頭)) {\r\n              let 擬音 = callDeriver(音韻地位, 字頭);\r\n              const entry = entries.find(key => key[0].every((pronunciation, i) => pronunciation === 擬音[i]));\r\n              if (entry) entry[1].push({ 字頭, 解釋, 音韻地位 });\r\n              else entries.push([擬音, [{ 字頭, 解釋, 音韻地位 }]]);\r\n            }\r\n          }\r\n          return <Entry key={id + i} ch={ch} entries={entries} tooltip={this.largeTooltip}></Entry>;\r\n        }),\r\n\r\n      convertPresetArticle: () =>\r\n        presetArticle.split(\"\\n\\n\").map((passage, i) => (\r\n          <React.Fragment key={i}>\r\n            {passage.split(\"\\n\").map((line, key) => {\r\n              let output: React.ReactElement[] = [];\r\n              const chs = Array.from(line);\r\n\r\n              for (let i = 0; i < chs.length; i++) {\r\n                if (chs[i + 1] === \"(\") {\r\n                  const j = i;\r\n                  while (chs[++i] !== \")\" && i < chs.length);\r\n\r\n                  const 字頭 = chs[j];\r\n                  const 描述 = chs.slice(j + 2, i).join(\"\");\r\n                  const 音韻地位 = class音韻地位.from描述(描述);\r\n                  const 擬音 = callDeriver(音韻地位, 字頭);\r\n\r\n                  output.push(\r\n                    <ruby key={id + j}>\r\n                      {字頭}\r\n                      <rp>(</rp>\r\n                      <rt lang=\"och-Latn-fonipa\">{joinWithBr(擬音)}</rt>\r\n                      <rp>)</rp>\r\n                    </ruby>\r\n                  );\r\n                } else output.push(<React.Fragment key={id + i}>{chs[i]}</React.Fragment>);\r\n              }\r\n\r\n              return React.createElement(key ? \"p\" : \"h3\", { key }, output);\r\n            })}\r\n          </React.Fragment>\r\n        )),\r\n\r\n      exportAllSmallRhymes: () =>\r\n        Array.from(iter音韻地位()).map((音韻地位, i) => (\r\n          <p key={id + i}>\r\n            {音韻地位.描述} <span lang=\"och-Latn-fonipa\">{callDeriver(音韻地位, null).join(\" / \")}</span>{\" \"}\r\n            {音韻地位.代表字}\r\n          </p>\r\n        )),\r\n\r\n      exportAllSyllables: () => [\r\n        <span lang=\"och-Latn-fonipa\" key={id + 0}>\r\n          {Array.from(\r\n            new Set(Array.from(iter音韻地位()).map(音韻地位 => callDeriver(音韻地位, null).join(\" / \")))\r\n          ).join(\", \")}\r\n        </span>,\r\n      ],\r\n\r\n      exportAllSyllablesWithCount: () => [\r\n        <span lang=\"och-Latn-fonipa\" key={id + 0}>\r\n          {Array.from(\r\n            Array.from(iter音韻地位()).reduce((counter, 音韻地位) => {\r\n              const 擬音 = callDeriver(音韻地位, null).join(\" / \");\r\n              counter.set(擬音, -~counter.get(擬音));\r\n              return counter;\r\n            }, new Map())\r\n          )\r\n            .sort((a, b) => b[1] - a[1])\r\n            .map(([k, v]) => `${k} (${v})`)\r\n            .join(\", \")}\r\n        </span>,\r\n      ],\r\n    };\r\n\r\n    try {\r\n      // eslint-disable-next-line no-new-func\r\n      userInputs = this.state.schemas.map(({ input }) => new Function(\"音韻地位\", \"字頭\", \"選項\", input));\r\n    } catch (err) {\r\n      notifyError(\"程式碼錯誤\", err);\r\n      return;\r\n    }\r\n    try {\r\n      this.setState({ output: handles[this.state.option](), isApplied: true });\r\n    } catch (err) {}\r\n  }\r\n\r\n  handleCopy() {\r\n    const txt = this.outputArea?.textContent;\r\n    if (txt) {\r\n      if (navigator.clipboard) navigator.clipboard.writeText(txt).then(copySuccess, () => copyFallback(txt));\r\n      else copyFallback(txt);\r\n    } else notifyError(\"請先進行操作，再匯出結果\");\r\n  }\r\n\r\n  scrollToOutput(element: HTMLElement) {\r\n    this.outputArea = element;\r\n    if (this.state.isApplied) {\r\n      element.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\r\n      this.setState({ isApplied: false });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const changeValue = (key: keyof MainState, value: any) => {\r\n      this.setState({ [key]: value } as MainState, () => {\r\n        localStorage.setItem(key, this.state[key] + \"\");\r\n      });\r\n    };\r\n\r\n    const storeSchemas = () => {\r\n      localStorage.setItem(\"schemas\", JSON.stringify(this.state.schemas.map(schema => schema.name)));\r\n      localStorage.setItem(\"inputs\", JSON.stringify(this.state.schemas.map(schema => schema.input)));\r\n      localStorage.setItem(\"parameters\", JSON.stringify(this.state.schemas.map(schemas => schemas.parameters)));\r\n    };\r\n\r\n    const addSchema = (id: number | null) => {\r\n      this.setState(({ schemas }) => {\r\n        schemas = [...schemas];\r\n        schemas.splice(schemas.findIndex(schema => schema.id === id) + 1, 0, schemaCopy());\r\n        return { schemas };\r\n      }, storeSchemas);\r\n    };\r\n\r\n    const setSchemaState = (state: SchemaState) => {\r\n      this.setState(({ schemas }) => {\r\n        schemas = [...schemas];\r\n        schemas[schemas.findIndex(schema => schema.id === state.id)] = state;\r\n        return { schemas };\r\n      }, storeSchemas);\r\n    };\r\n\r\n    const deleteSchema = (state: SchemaState) => {\r\n      this.setState(({ schemas }) => ({ schemas: schemas.filter(schema => schema.id !== state.id) }), storeSchemas);\r\n    };\r\n\r\n    return (\r\n      <div className=\"main-container\">\r\n        <form className=\"add-schema\">\r\n          <input type=\"button\" title=\"新增方案\" onClick={() => addSchema(null)} />\r\n        </form>\r\n        {this.state.schemas.map((schema, index, array) => (\r\n          <React.Fragment key={schema.id}>\r\n            <SchemaEditor\r\n              name={schema.name}\r\n              input={schema.input}\r\n              original={schema.original}\r\n              id={schema.id}\r\n              parameters={schema.parameters}\r\n              setSchemaState={setSchemaState}\r\n              deleteSchema={deleteSchema}\r\n              single={array.length === 1}\r\n              autocomplete={this.state.autocomplete}\r\n            />\r\n            <form className=\"add-schema\">\r\n              <input type=\"button\" title=\"新增方案\" onClick={() => addSchema(schema.id)} />\r\n            </form>\r\n          </React.Fragment>\r\n        ))}\r\n\r\n        <form className=\"pure-form\">\r\n          <p>\r\n            <textarea\r\n              id=\"articleInput\"\r\n              placeholder=\"輸入框\"\r\n              rows={5}\r\n              autoComplete=\"off\"\r\n              autoCorrect=\"off\"\r\n              autoCapitalize=\"off\"\r\n              spellCheck=\"false\"\r\n              required\r\n              onChange={event => changeValue(\"article\", event.target.value)}\r\n              value={this.state.article}\r\n            />\r\n          </p>\r\n          <p>\r\n            <label>\r\n              <select onChange={event => changeValue(\"option\", event.target.value)} value={this.state.option}>\r\n                {Object.entries(options).map(([value, label], index) => (\r\n                  <option key={index} value={value}>\r\n                    {label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </label>\r\n            <label className={this.state.option === \"convertArticle\" ? \"\" : \"hidden\"}>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={this.state.convertVariant}\r\n                onChange={event => changeValue(\"convertVariant\", event.target.checked)}\r\n              />\r\n              轉換異體字\r\n            </label>\r\n            <input\r\n              className=\"pure-button pure-button-primary\"\r\n              type=\"button\"\r\n              value=\"適用\"\r\n              onClick={() => this.handlePredefinedOptions()}\r\n            />\r\n            <input className=\"pure-button\" type=\"button\" value=\"匯出至剪貼簿\" onClick={() => this.handleCopy()} />\r\n            <label>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={this.state.autocomplete}\r\n                onChange={event => changeValue(\"autocomplete\", event.target.checked)}\r\n              />\r\n              編輯推導方案時顯示自動完成\r\n            </label>\r\n          </p>\r\n        </form>\r\n\r\n        <output ref={element => element && this.scrollToOutput(element)}>{this.state.output}</output>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Main;\r\n","import \"purecss/build/pure.css\";\r\nimport \"./App.scss\";\r\nimport Main from \"./Main\";\r\nimport Swal from \"sweetalert2\";\r\nimport withReactContent from \"sweetalert2-react-content\";\r\n\r\nconst SwalReact = withReactContent(Swal);\r\n\r\nfunction showAbout() {\r\n  SwalReact.fire({\r\n    showClass: { popup: \"\" },\r\n    hideClass: { popup: \"\" },\r\n    customClass: {\r\n      container: \"about-modal\",\r\n      htmlContainer: \"about-modal-content\",\r\n    },\r\n    width: \"60vw\",\r\n    showCloseButton: true,\r\n    showConfirmButton: false,\r\n    html: (\r\n      <>\r\n        <h2>關於</h2>\r\n        <p>\r\n          切韻音系自動推導器（下稱「本頁面」）由 <a href=\"https://nk2028.shn.hk/\">nk2028</a>{\" \"}\r\n          開發。我們開發有關語言學的項目，尤其是有關歷史漢語語音學，異體字和日語語言學的項目。\r\n        </p>\r\n        <p>\r\n          歡迎加入 QQ 音韻學答疑羣（羣號 526333751）和 Telegram nk2028 社羣（\r\n          <a href=\"https://t.me/nk2028_discuss\">@nk2028_discuss</a>）。\r\n        </p>\r\n        <p>\r\n          本頁面原始碼公開於 <a href=\"https://github.com/nk2028/qieyun-autoderiver\">GitHub</a>。\r\n        </p>\r\n\r\n        <h2>私隱權政策</h2>\r\n        <p>\r\n          本頁面是一項開放原始碼的網絡服務。作為本頁面的開發者，我們對您的私隱非常重視。本頁面的開發者不會透過本頁面收集您的任何資料。\r\n        </p>\r\n        <p>下面將具體介紹本頁面能在何種程度上保障您的私隱權。</p>\r\n        <b>您鍵入的內容</b>\r\n        <p>\r\n          本頁面的開發者不會收集您在本頁面中鍵入的任何內容。任何與您鍵入的內容相關的運算全部在您的系統中完成。本頁面不會將包括待標註的文本、標註結果在內的任何資料傳送至任何伺服器。\r\n        </p>\r\n        <b>您的其他資料</b>\r\n        <p>\r\n          本頁面使用的內容託管於以下站點：GitHub Pages、jsDelivr、Google\r\n          Fonts。在您訪問本頁面時，您的瀏覽器將與這些站點交互。本頁面的開發者並不能讀取您訪問這些站點時產生的資料，亦無法控制這些站點如何使用您訪問時產生的資料。\r\n        </p>\r\n      </>\r\n    ),\r\n  });\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n    <div>\r\n      <header>\r\n        <nav>\r\n          <h1>\r\n            <span onClick={showAbout}>切韻音系自動推導器</span>\r\n          </h1>\r\n        </nav>\r\n      </header>\r\n      <Main />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}